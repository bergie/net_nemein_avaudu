(function(D){D.fn.infinitescroll=function(F,K){function E(N,L,O,M){try{if(typeof console!="undefined"){console.log.apply(console,arguments)}}catch(O){if(typeof console!="undefined"){console.log(N,L,O,M)}}}var H=D.extend({},D.fn.infinitescroll.defaults,F);var G=D.fn.infinitescroll;K=K||function(){};if(!A(H)){return false}var J=/(.*?\/\/).*?(\/.*)/;var I=D(H.nextSelector).attr("href");if(!!I){H.debug&&E("Navigation selector not found");return }I=I.match(J)?I.match(J)[2]:I;H.contentSelector=H.contentSelector||this;D.fn.infinitescroll.loadingMsg=D('<div id="infscr-loading" style="text-align: center;"><img style="float:none;" alt="Loading..." src="'+H.loadingImg+'" /><br /><span>'+H.loadingText+"</span></div>");G.scrollDelta=D.fn.infinitescroll.scrollDelta=D(document).height()-D(H.navSelector).offset().top;(new Image()).src=H.loadingImg;if(I.match(/^(.*?\/)2(\/|$)/)){I=I.match(/^(.*?\/)2(\/|$)/).slice(1)}else{H.debug&&E("Sorry, we couldn't parse your Next (Previous Posts) URL. Verify your the css selector points to the correct A tag. If you still get this error: yell, scream, and kindly ask for help at infinite-scroll.com.");G.isInvalidPage=true}D(document).ajaxError(function(M,N,L){H.debug&&E("Page not found. Self-destructing...");if(N.status==404){G.isDone=true}});D(window).scroll(function(){B(I,H,G,K)});B(I,H,G,K);return this};function A(F){for(var E in F){if(E.indexOf&&E.indexOf("Selector")>0&&jQis(F[E]).length===0){F.debug&&debug("Your "+E+" found no elements.");return false}return true}}function C(F,E){return(D(document).height()-D(document).scrollTop()-D(window).height()<E.scrollDelta)}function B(H,G,E,I){if(E.isDuringAjax||E.isInvalidPage||E.isDone){return }if(C(G,E)){E.isDuringAjax=true;E.loadingMsg.appendTo(G.contentSelector).show();D(G.navSelector).hide();E.currPage++;var F=D(G.contentSelector).is("table")?D("<tbody/>"):D("<div/>");F.attr("id","infscr-page-"+E.currPage).attr("class","infscr-pages").appendTo(G.contentSelector).load(H.join(E.currPage)+" "+G.itemSelector,null,function(){if(E.isDone){E.loadingMsg.find("img").hide().parent().find("span").html(G.donetext).animate({opacity:1},2000).fadeOut("normal")}else{E.loadingMsg.fadeOut("normal");if(G.animate){var J=jQuery(window).scrollTop()+jQuery("#infscr-loading").height()+G.extraScrollPx+"px";jQuery("html,body").animate({scrollTop:J},800,function(){E.isDuringAjax=false})}E.currDOMChunk=D("#infscr-page-"+E.currPage)[0];I.call(E.currDOMChunk);if(!G.animate){E.isDuringAjax=false}}})}}D.extend(D.fn.infinitescroll,{defaults:{debug:false,preload:false,nextSelector:"div.navigation a:first",loadingImg:"http://www.infinite-scroll.com/loading.gif",loadingText:"<em>Loading the next set of posts...</em>",donetext:"<em>Congratulations, you've reached the end of the internet.</em>",navSelector:"div.navigation",contentSelector:null,extraScrollPx:150,itemSelector:"div.post",animate:false},currPage:1,currDOMChunk:null,isDuringAjax:false,isInvalidPage:false,isDone:false})})(jQuery);